<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>TCCC Êà∞ÂÇ∑ÊïëË≠∑</title>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-standalone/7.23.5/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap');
        body { font-family: 'Noto Sans TC', sans-serif; -webkit-tap-highlight-color: transparent; }
        .animate-fadeIn { animation: fadeIn 0.3s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .scrollbar-hide::-webkit-scrollbar { display: none; }
    </style>
</head>
<body class="bg-gray-100 text-gray-900 h-screen w-screen overflow-hidden">

    <div id="root" class="h-full w-full max-w-md mx-auto bg-white shadow-2xl overflow-hidden relative"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- ÂúñÁ§∫ÁµÑ‰ª∂ ---
        const Icon = ({ path, color = "currentColor", size = 24, className = "", fill="none" }) => (
            <svg xmlns="http://www.w3.org/2000/svg" width={size} height={size} viewBox="0 0 24 24" fill={fill} stroke={color} strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}>
                {path}
            </svg>
        );

        const Icons = {
            Star: (props) => <Icon {...props} path={<polygon points="12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2" />} />,
            Clock: (props) => <Icon {...props} path={<><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></>} />,
            Book: (props) => <Icon {...props} path={<><path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"/><path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"/></>} />,
            Home: (props) => <Icon {...props} path={<><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/><polyline points="9 22 9 12 15 12 15 22"/></>} />,
            CheckCircle: (props) => <Icon {...props} path={<><path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/><polyline points="22 4 12 14.01 9 11.01"/></>} />,
            XCircle: (props) => <Icon {...props} path={<><circle cx="12" cy="12" r="10"/><line x1="15" y1="9" x2="9" y2="15"/><line x1="9" y1="9" x2="15" y2="15"/></>} />,
            ChevronLeft: (props) => <Icon {...props} path={<polyline points="15 18 9 12 15 6"/>} />,
            Activity: (props) => <Icon {...props} path={<polyline points="22 12 18 12 15 21 9 3 6 12 2 12"/>} />,
        };

        const App = () => {
             // È°åÁõÆË≥áÊñôÂ∫´
             const allQuestions = [
                { id: 1, question: "‰∏ãÂàó‰ΩïËÄÖÁÇ∫Êà∞Ë°ìÊà∞ÂÇ∑ÁÖßË≠∑ÁöÑÁõÆÊ®ôÔºü", options: ["ÂÇ∑ÊÇ£Ê≤ªÁôÇ", "È†êÈò≤Êõ¥Â§öÂÇ∑ÊÇ£", "ÂÆåÊàê‰ªªÂãô", "‰ª•‰∏äÁöÜÊòØ"], correctAnswer: 3 },
                { id: 2, question: "Âú®Êà∞Â†¥‰∏äÔºå‰ºëÂÖãÁöÑ‰∏ªË¶ÅËÇáÂõ†ÊòØ‰ªÄÈ∫ºÔºü", options: ["Ê∞£ÈÅìÈòªÂ°û", "È†≠ÈÉ®ÂâµÂÇ∑", "Â§±Ë°Ä", "ÁáíÁáôÂÇ∑"], correctAnswer: 2 },
                { id: 3, question: "‰∏ãÂàó‰ΩïËÄÖÈùûÊà∞Ë°ìÊà∞ÂÇ∑ÊïëË≠∑‰∏âÈöéÊÆµ‰πã‰∏ÄÔºü", options: ["ÊïµÁÅ´‰∏ã‰ΩúÊ•≠", "Êà∞Ë°ìÂçÄÈÜ´ÁôÇÊïëË≠∑", "Êà∞Ë°ìÊí§Èõ¢ÊïëË≠∑", "Êà∞È¨•ÊÄßÂëΩ‰øùÂ≠ò"], correctAnswer: 3 },
                { id: 4, question: "Âú®Êà∞Â†¥ÊïµÁÅ´‰∏ãÊïëË≠∑ÂæåÔºåÂ∞áÁóÖÊÇ£ÁßªËá≥Êà∞Ë°ìÂçÄÊé©È´îÂæåÊñπÔºå‰Ω†ÁöÑ‰∏ã‰∏ÄÂÄãÊ≠•È©üÁÇ∫‰ΩïÔºü", options: ["ÊâìÈñãÂëºÂê∏ÈÅì", "Ë©ï‰º∞ÊÑèË≠òÁãÄÊÖã", "ÈñãÂßãÂõ∫ÂÆöÂ∑≤Áü•È™®ÊäòËôï", "ÈªûÊª¥ÈñãËá≥ÊúÄÈ´òÊµÅÈÄüÊ≥®Â∞Ñ 500ML ÊûóÊ†ºÂºè‰π≥ÈÖ∏Ê∂≤"], correctAnswer: 1 },
                { id: 5, question: "Âú®Êà∞Â†¥Êà∞ÂÇ∑ÁÖßË≠∑ÊôÇÔºåÊà∞Â†¥‰∏ä‰ΩøÁî®Êà∞Ë°ìÊ≠¢Ë°ÄÂ∏∂Á¥óÂ∏ÉÂøÖÈ†àÂä†Â£ìÂπæÂàÜÈêòÔºü", options: ["1ÂàÜÈêò", "3ÂàÜÈêò", "5ÂàÜÈêò", "10ÂàÜÈêò"], correctAnswer: 1 },
                { id: 6, question: "‰∏ãÂàóÊïò‰∫ã‰ΩïËÄÖ‰∏çÈÅ©ÂêàÊïµÁÅ´‰∏ãÁÖßÈ°ßÔºü", options: ["‰ΩøÁî®Ê≠¢Ë°ÄÂ∏∂ÊéßÂà∂Ëá¥ÂëΩÂûãÂõõËÇ¢Âá∫Ë°Ä", "Âª∫Á´ãÈùúËÑàËº∏Ê∂≤", "ÂøÖË¶ÅÊôÇÁÅ´ÂäõÂèçÊìä", "Â∞ãÊâæÈö±ËîΩÊé©ËîΩ"], correctAnswer: 1 },
                { id: 7, question: "Áï∂‰∏Ä‰ΩçÈÜ´ÂãôÂÖµÈÅáÂà∞‰∏ãÂàóÂõõÁ®ÆÁóÖÊÇ£ÔºåÂì™‰ΩçË©≤ÂÑ™ÂÖàËôïÁΩÆÔºü", options: ["ÂÇ∑ÊÇ£ A-È†≠ÈÉ®ÊßçÂÇ∑‰∏îÁÑ°ÊÑèË≠ò", "ÂÇ∑ÊÇ£ B-ËÖπÈÉ®ÊßçÂÇ∑‰∏îÊÑèË≠òÊ∏ÖÊ•ö", "ÂÇ∑ÊÇ£ C-Â§ßËÖøÊßçÂÇ∑‰∏îÂö¥ÈáçÂá∫Ë°Ä", "ÂÇ∑ÊÇ£ D-Â∞èËÖøÊßçÂÇ∑‰∏îÊöóÁ¥ÖËâ≤‰∫õÂæÆÂá∫Ë°Ä"], correctAnswer: 2 },
                { id: 8, question: "Âú®Êà∞Ë°ìÊà∞ÂÇ∑ÊïëË≠∑ÈöéÊÆµÔºåÊà∞Â£´Âõ†ÁàÜÁÇ∏È°èÈù¢ÂèóÂÇ∑ÂèäÂëºÂê∏ÈÅìÂê∏ÂÖ•ÊÄßÁÅºÂÇ∑Ë©≤Â¶Ç‰ΩïÂª∫Á´ãÂëºÂê∏ÈÅìÔºü", options: ["ÈºªÂíΩÂëºÂê∏ÈÅì", "Â§ñÁßëÂëºÂê∏ÈÅì", "ÊèíÁÆ°", "ÈéñÈ™®‰∏≠Á∑öÈáùÂà∫Ê∏õÂ£ì"], correctAnswer: 1 },
                { id: 9, question: "‰∏ãÂàó‰ΩïËÄÖÁÇ∫Êà∞È¨•ÊïëË≠∑ÊäÄË°ìÂì°Êà∞Ë°ìÂçÄÊïëË≠∑ÊµÅÁ®ã(M.A.R.C.H)‰∏≠ C ‰πãËôïÁΩÆÔºü", options: ["ÂëºÂê∏ÈÅì", "Âæ™Áí∞", "ÂÖ®Ë∫´Ë©ï‰º∞", "Âö¥ÈáçÂá∫Ë°Ä"], correctAnswer: 1 },
                { id: 10, question: "‰∏ãÂàóÂì™‰∫õ‰ΩçÁΩÆÁÇ∫ÈáùÂà∫Ê∏õÂ£ì‰πãÊ≠£Á¢∫ÁΩÆÂÖ•ÈªûÔºü", options: ["Á¨¨ÂõõËÇãÈñìÈéñÈ™®‰∏≠Á∑ö„ÄÅÁ¨¨‰∫îËÇãÈñìËÖãÂâçÁ∑ö", "Á¨¨‰∏ÄËÇãÈñìÈéñÈ™®‰∏≠Á∑ö„ÄÅÁ¨¨‰∏âËÇãÈñìËÖãÂâçÁ∑ö", "Á¨¨‰∫îËÇãÈñìÈéñÈ™®‰∏≠Á∑ö„ÄÅÁ¨¨‰∫åËÇãÈñìËÖãÂâçÁ∑ö", "Á¨¨‰∫åËÇãÈñìÈéñÈ™®‰∏≠Á∑ö„ÄÅÁ¨¨‰∫îËÇãÈñìËÖãÂâçÁ∑ö"], correctAnswer: 3 },
                { id: 11, question: "‰∏ãÂàó‰ΩïËÄÖÁÇ∫Êà∞È¨•ÊïëË≠∑ÊäÄË°ìÂì°Êà∞Ë°ìÂçÄÊïëË≠∑ÊµÅÁ®ã(M.A.R.C.H)‰∏≠ A ‰πãËôïÁΩÆÁÇ∫‰ΩïÔºü", options: ["Âª∫Á´ãÂëºÂê∏ÈÅì", "Ë©ï‰º∞Âæ™Áí∞", "ÈÄ≤Ë°åÂÖ®Ë∫´Ë©ï‰º∞", "Âö¥ÈáçÂá∫Ë°ÄËôïÁΩÆ"], correctAnswer: 0 },
                { id: 12, question: "ÁÑ°Á∑öÈõªÂÇ∑ÊÇ£ÂæåÈÄÅ‰πùÁ∑öÂõûÂ†±‰∏≠Á¨¨‰∫îÁ∑öÂõûÂ†±ÂÖßÂÆπÁÇ∫‰ΩïÔºü", options: ["ÁÑ°Á∑öÈõªÈ†ªÁéá", "ÂÇ∑ÊÇ£ÂúãÁ±ç", "ÂÇ∑ÊÉÖÁãÄÊ≥Å(Á∑äÊÄ•„ÄÅÊâãË°ì„ÄÅÂÑ™ÂÖà„ÄÅ‰∏ÄËà¨„ÄÅËºïÂæÆ)", "ÂÇ∑ÊÇ£ÂÇ∑ÊÉÖÂæåÈÄÅÂßøÂã¢"], correctAnswer: 3 },
                { id: 13, question: "‰∏ãÂàó‰ΩïËÄÖÁÇ∫Êà∞È¨•ÊïëË≠∑ÊäÄË°ìÂì°Êà∞Ë°ìÂçÄÊïëË≠∑ÊµÅÁ®ã(M.A.R.C.H)‰∏≠ M ‰πãËôïÁΩÆÁÇ∫‰ΩïÔºü", options: ["Âª∫Á´ãÂëºÂê∏ÈÅì", "Ë©ï‰º∞Âæ™Áí∞", "ÈÄ≤Ë°åÂÖ®Ë∫´Ë©ï‰º∞", "Âö¥ÈáçÂá∫Ë°ÄËôïÁΩÆ"], correctAnswer: 3 },
                { id: 14, question: "ËÉ∏ÈÉ®ÂâµÂÇ∑‰πãÂÇ∑ÊÇ£ËÉ∏Â£ÅÁº∫ÊêçÁöÑÂ§ßÂ∞èÈÅîÊ∞£ÁÆ°Âè£ÂæëÁöÑ‰∏âÂàÜ‰πã‰∫åÊôÇÔºåÂ∞áÈÄ†Êàê‰∏ãÂàó‰ΩïÁ®ÆÊÉÖÊ≥ÅÁôºÁîüÔºü", options: ["ÈñãÊîæÊÄßÊ∞£ËÉ∏", "ÂºµÂäõÊÄßÊ∞£ËÉ∏", "ÈÄ£Êû∑ËÉ∏", "Ë°ÄËÉ∏"], correctAnswer: 0 },
                { id: 15, question: "Áï∂Âú®ËôïÁΩÆÊßçÂÇ∑ÂÇ∑ÊÇ£‰∏ãÈ°éÈ™®ÊôÇÈÄ†ÊàêÂö¥ÈáçÁöÑÂëºÂê∏ÈÅì‰∏≠Êñ∑ÔºåÂÇ∑ÊÇ£ÂøΩÁÑ∂ÈñìÂëºÂê∏ÈÅìÈòªÂ°ûÔºåÂπæÁ∂ìÊéôÊâéÂæåÂ§±ÂéªÊÑèË≠òÔºåÈÄôÊôÇÊúÉÈÅ∏ÊìáÂì™Á®ÆÂëºÂê∏ÈÅìÂª∫Á´ãÊñπÂºèÔºü", options: ["ÈºªÂíΩÂëºÂê∏ÈÅì‰∏îÊé°Âæ©Áî¶ÂßøÂã¢", "Ê∞£ÁÆ°ÂÖßÁÆ°ÊèíÁÆ°ËôïÁΩÆ", "Â§ñÁßëÂëºÂê∏ÈÅìÂª∫Á´ã", "ËÆìÊÇ£ËÄÖÂÅöËµ∑‰æÜ‰∏¶ÂòóË©¶ÂêπÂÖ©Âè£Ê∞£"], correctAnswer: 2 },
                { id: 16, question: "ÁèæËôïÊñº„ÄåÂÇ∑ÊÇ£ÈõÜÁµêÈªûÊïëË≠∑„ÄçÈöéÊÆµÔºåÊïëË≠∑Âì°Áî®ÊìîÊû∂Êä¨‰∫Ü‰∏ÄÂêçÂ∑¶Â∞èËÖø‰∏≠ÂΩàÁöÑÂÇ∑ÊÇ£ÔºåÂè¶‰ΩçÈöäÂì°‰∫§Êé•Ë™™ÔºåË©≤ÂÇ∑ÊÇ£ÂÇ∑Âè£Âá∫Ë°Ä‰∏çÂ§öÔºåÂ∑≤Áî®Âä†Â£ìÂºèÂΩàÁπÉÂåÖÁ¥ÆÔºå‰ΩÜÁèæÂú®ÁõÆË¶ñÂà∞ÂåÖÁ¥ÆËôïÂ∑≤Êµ∏Á¥Ö‰∏îÁ∑©Á∑©Êª¥Ë°ÄÔºå‰∏îÂÇ∑ÊÇ£Ê≠£Êä±ÊÄ®ÁñºÁóõÂèäÊÑüË¶∫È†≠ÊöàÔºåË´ãÂïè‰∏ã‰∏ÄÊ≠•Ê≤ªÁôÇÊòØÔºü", options: ["Âú®ÂåÖÁ¥ÆËôïÂÜçÂåÖ‰∏ä‰∏ÄÂ±§Âä†Â£ìÂºèÂΩàÁπÉ", "Ê∏¨ÈáèÁîüÂëΩÂæµË±°ÔºåÁ¢∫Ë™çË°ÄÂ£ìÂÄº", "ÈñãÂßãÈùúËÑàÊ≥®Â∞ÑÔºå‰ªñÁèæÂú®ÈúÄÈ¶¨‰∏äËº∏Ë°Ä", "Á´ãÂç≥‰∏äÊ≠¢Ë°ÄÂ∏∂"], correctAnswer: 3 },
                { id: 17, question: "‰∏Ä‰ΩçËÉ∏ÈÉ®ÊßçÂÇ∑ÁöÑÂÇ∑ÊÇ£ÔºåÂú®‰Ω†‰ª•ÈªèË≤ºËÉ∏Â∞ÅËôïÁêÜÂæåÔºåÂÇ∑ÊÇ£Âá∫ÁèæÂëºÂê∏Âõ∞Èõ£ÁöÑÁèæË±°Ôºå‰∏ã‰∏ÄÈÉ®ÊúÄ‰Ω≥ÂÅöÊ≥ïÁÇ∫Ôºü", options: ["ÊèíÁÆ°", "ÁΩÆÂÖ•ËÉ∏ÁÆ°", "ÊíïÈñãËÉ∏Â∞ÅÂπæÁßíÈêò‰ª•ÂÆåÊàêÊ∏õÂ£ìÔºå‰πãÂæåÂÜçË≤ºÂõûÁöÆËÜö‰∏ä", "Áí∞Áî≤ËÜúÂàáÈñãË°ì"], correctAnswer: 2 },
                { id: 18, question: "ÁÑ°Á∑öÈõªÂÇ∑ÊÇ£ÂæåÈÄÅ‰πùÁ∑öÂõûÂ†±‰∏≠Á¨¨‰∏âÁ∑öÂõûÂ†±ÂÖßÂÆπÁÇ∫‰ΩïÔºü", options: ["ÂÇ∑ÊÇ£ÂÇ∑ÊÉÖÂæåÈÄÅÂßøÂã¢", "ÂÇ∑ÊÇ£ÂæåÈÄÅÂ∫ßÊ®ôÈªû", "ÁÑ°Á∑öÈõªÈ†ªÁéá", "ÂÇ∑ÊÉÖÁãÄÊ≥Å(Á∑äÊÄ•„ÄÅÊâãË°ì„ÄÅÂÑ™ÂÖà„ÄÅ‰∏ÄËà¨„ÄÅËºïÂæÆ)"], correctAnswer: 3 },
                { id: 19, question: "Âú®Êà∞Ë°ìÁí∞Â¢É‰∏ãÔºåÊúÄ‰Ω≥ËôïÁΩÆÂö¥ÈáçÂõõËÇ¢Âá∫Ë°ÄÁöÑÊúÄÂ•ΩÊñπÊ≥ïÊòØÔºü", options: ["Áõ¥Êé•Âä†Â£ì", "Â£ìÂäõÈªûÂä†Â£ì", "‰∏ÄÂÄãÂ£ìÂäõË£ùÁΩÆ", "Ê≠¢Ë°ÄÂ∏∂"], correctAnswer: 3 },
                { id: 20, question: "ÊïëË≠∑Âì°ÊàñÈÜ´ÂãôÂÖµÂú®ÂèóÂÆåÊà∞Ë°ìÊà∞Â†¥ÁÖßË≠∑Ë®ìÁ∑¥ÂæåÔºåÊáâÂÖ∑ÊúâÁΩÆÂÖ•ËÉ∏ÁÆ°ÁöÑÊäÄËÉΩÔºü", options: ["ÊòØ", "Âê¶"], correctAnswer: 1 },
                { id: 21, question: "ÂÇ∑ÊÇ£Ëã•Â§ßËÖøÊñ∑ËÇ¢ÔºåÂÖ∂ËÇ°ÂãïËÑàÂá∫Ë°ÄËá¥Ê≠ªÈúÄË¶ÅÂ§öÈï∑ÊôÇÈñìÔºü", options: ["1ÂàÜÈêòÂÖß", "5ÂàÜÈêòÂÖß", "3ÂàÜÈêòÂÖß", "10ÂàÜÈêòÂÖß"], correctAnswer: 2 },
                { id: 22, question: "‰∏ãÂàó‰ΩïËÄÖÁÇ∫Êà∞È¨•ÊïëË≠∑ÊäÄË°ìÂì°Êà∞Ë°ìÂçÄÊïëË≠∑ÊµÅÁ®ã(M.A.R.C.H)‰∏≠ H ‰πãËôïÁΩÆÁÇ∫‰ΩïÔºü", options: ["Âª∫Á´ãÂëºÂê∏ÈÅì", "Ë©ï‰º∞Âæ™Áí∞", "È†≠ÈÉ®ÂÇ∑ÂÆ≥Ë©ï‰º∞Âèä‰øùÊöñ", "Âö¥ÈáçÂá∫Ë°ÄËôïÁΩÆ"], correctAnswer: 2 },
                { id: 23, question: "‰∏ãÂàóÁÇ∫ËÄÖÁÇ∫Êà∞Â†¥‰∏äÂØ¶ÊñΩ CPR ÁöÑ‰ª£ÂÉπÔºü", options: ["CPRÊñΩÊïëËÄÖÂèØËÉΩË¢´ÊÆ∫", "‰ªªÂãôÂª∂Ë™§", "ÂÇ∑ÊÇ£‰æùËàäÊ≠ª‰∫°", "‰ª•‰∏äÁöÜÊòØ"], correctAnswer: 3 },
                { id: 24, question: "ÂºµÂäõÊÄßÊ∞£ËÉ∏ÈáùÂà∫Ê∏õÂ£ìËôïÁΩÆ‰ª•‰ΩïÁ®ÆÂè£Âæë‰πãÈáùÈ†≠ËºÉÁÇ∫Ê¥ΩÁï∂Ôºü", options: ["14Ëôü", "22Ëôü", "24Ëôü", "18Ëôü"], correctAnswer: 0 },
                { id: 25, question: "‰∏ãÂàó‰ΩïËÄÖÁÇ∫Êà∞Â†¥ÊïëË≠∑ÊµÅÁ®ã(M.A.R.C.H)‰∏≠ R ‰πãËôïÁΩÆÁÇ∫‰ΩïÔºü", options: ["ÁΩÆÂÖ•ÈºªÂíΩ", "ËÉ∏ÈáùÂà∫Ê∏õÂ£ìËôïÁΩÆ", "Ëìã‰∏äÊØõÊØØ", "Ê≠¢Ë°ÄÂ∏∂ËôïÁΩÆ"], correctAnswer: 1 }
            ];

            const marchData = [
                { letter: 'M', title: 'Massive Hemorrhage', subtitle: 'ÊéßÂà∂Âö¥ÈáçÂá∫Ë°Ä', desc: 'ÂÑ™ÂÖà‰ΩøÁî®Ê≠¢Ë°ÄÂ∏∂„ÄÇQ9, Q13 ËÄÉÈªû', color: 'bg-red-100 text-red-800' },
                { letter: 'A', title: 'Airway', subtitle: 'ÂëºÂê∏ÈÅìËôïÁΩÆ', desc: 'ÈºªÂíΩ/Âè£ÂíΩ/Â§ñÁßëÂëºÂê∏ÈÅì„ÄÇQ11 ËÄÉÈªû', color: 'bg-blue-100 text-blue-800' },
                { letter: 'R', title: 'Respiration', subtitle: 'ÂëºÂê∏ / ËÉ∏ÈÉ®ÂâµÂÇ∑', desc: 'Ê∞£ËÉ∏ËôïÁΩÆ„ÄÅÈáùÂà∫Ê∏õÂ£ì„ÄÅËÉ∏Â∞Å„ÄÇQ25 ËÄÉÈªû', color: 'bg-green-100 text-green-800' },
                { letter: 'C', title: 'Circulation', subtitle: 'Âæ™Áí∞ / ‰ºëÂÖã', desc: 'Ê∂≤È´îÂæ©Áî¶„ÄÅÊ™¢Êü•ËÑàÊêè„ÄÇQ9 ËÄÉÈªû', color: 'bg-yellow-100 text-yellow-800' },
                { letter: 'H', title: 'Head & Hypothermia', subtitle: 'È†≠ÈÉ®ÊêçÂÇ∑ / ‰ΩéÈ´îÊ∫´', desc: 'ÊÑèË≠òË©ï‰º∞„ÄÅ‰øùÊöñÈ†êÈò≤‰ºëÂÖã„ÄÇQ22 ËÄÉÈªû', color: 'bg-purple-100 text-purple-800' },
            ];

            // ÁãÄÊÖãÁÆ°ÁêÜ
            const [currentScreen, setCurrentScreen] = useState('welcome');
            const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);
            const [score, setScore] = useState(0);
            const [selectedAnswer, setSelectedAnswer] = useState(null);
            const [isAnswerRevealed, setIsAnswerRevealed] = useState(false);
            const [wrongAnswers, setWrongAnswers] = useState([]);
            const [shuffledQuestions, setShuffledQuestions] = useState([]);
            const [quizMode, setQuizMode] = useState('normal'); // normal, star
            const [timeLeft, setTimeLeft] = useState(600); // 10 minutes in seconds
            const [bookmarks, setBookmarks] = useState(() => {
                const saved = localStorage.getItem('tccc_bookmarks');
                return saved ? JSON.parse(saved) : [];
            });

            // ÂÄíÊï∏Ë®àÊôÇÂô®
            useEffect(() => {
                let interval = null;
                if (currentScreen === 'quiz' && timeLeft > 0 && !isAnswerRevealed) {
                    interval = setInterval(() => {
                        setTimeLeft(prev => prev - 1);
                    }, 1000);
                } else if (timeLeft === 0 && currentScreen === 'quiz') {
                    // ÊôÇÈñìÂà∞ÔºåÂº∑Âà∂ÁµêÊùü
                    alert("ÊôÇÈñìÂà∞ÔºÅ‰∫§Âç∑ÔºÅ");
                    setCurrentScreen('result');
                }
                return () => clearInterval(interval);
            }, [currentScreen, timeLeft, isAnswerRevealed]);

            // ‰øùÂ≠òÊî∂Ëóè
            useEffect(() => {
                localStorage.setItem('tccc_bookmarks', JSON.stringify(bookmarks));
            }, [bookmarks]);

            const toggleBookmark = (id) => {
                if (bookmarks.includes(id)) {
                    setBookmarks(bookmarks.filter(bid => bid !== id));
                } else {
                    setBookmarks([...bookmarks, id]);
                }
            };

            const startQuiz = (mode = 'normal') => {
                let questionsToPlay = [...allQuestions];
                
                if (mode === 'star') {
                    questionsToPlay = allQuestions.filter(q => bookmarks.includes(q.id));
                    if (questionsToPlay.length === 0) {
                        alert("ÁõÆÂâçÊ≤íÊúâÊî∂ËóèÁöÑÈ°åÁõÆÂñîÔºÅÂú®Á∑¥ÁøíÊôÇÈªûÊìäÊòüÊòüÂç≥ÂèØÊî∂Ëóè„ÄÇ");
                        return;
                    }
                }

                // Ê¥óÁâå
                const shuffled = questionsToPlay.sort(() => Math.random() - 0.5);
                setShuffledQuestions(shuffled);
                setQuizMode(mode);
                setCurrentQuestionIndex(0);
                setScore(0);
                setWrongAnswers([]);
                setSelectedAnswer(null);
                setIsAnswerRevealed(false);
                setTimeLeft(mode === 'star' ? shuffled.length * 30 : 600); // Êî∂ËóèÊ®°ÂºèÊØèÈ°å30ÁßíÔºåÊ≠£Â∏∏Ê®°Âºè10ÂàÜÈêò
                setCurrentScreen('quiz');
            };

            const handleAnswerClick = (index) => {
                if (isAnswerRevealed) return;
                setSelectedAnswer(index);
                setIsAnswerRevealed(true);

                const currentQ = shuffledQuestions[currentQuestionIndex];
                if (index === currentQ.correctAnswer) {
                    setScore(score + 1);
                } else {
                    setWrongAnswers([...wrongAnswers, { ...currentQ, yourAnswer: index }]);
                    // Ëá™ÂãïÊî∂ËóèÈåØÈ°å (ÂèØÈÅ∏ÂäüËÉΩÔºåÈÄôË£°ÂÖà‰∏çÂÅöËá™ÂãïÔºåËÆì‰ΩøÁî®ËÄÖËá™Â∑±ÈÅ∏)
                }
            };

            const nextQuestion = () => {
                if (currentQuestionIndex < shuffledQuestions.length - 1) {
                    setCurrentQuestionIndex(currentQuestionIndex + 1);
                    setSelectedAnswer(null);
                    setIsAnswerRevealed(false);
                } else {
                    setCurrentScreen('result');
                }
            };

            const formatTime = (seconds) => {
                const m = Math.floor(seconds / 60);
                const s = seconds % 60;
                return `${m}:${s < 10 ? '0' : ''}${s}`;
            };

            // --- UI Screens ---

            const WelcomeScreen = () => (
                <div className="flex flex-col items-center justify-center h-full p-6 text-center space-y-6 animate-fadeIn bg-gradient-to-br from-gray-50 to-gray-200">
                    <div className="bg-red-600 p-5 rounded-2xl shadow-lg transform rotate-3">
                        <Icons.Activity className="text-white w-12 h-12" />
                    </div>
                    <div>
                        <h1 className="text-3xl font-extrabold text-gray-800 tracking-tight">TCCC Êà∞ÂÇ∑ÊïëË≠∑</h1>
                        <span className="inline-block bg-gray-800 text-white text-xs px-2 py-1 rounded mt-2">Â∞àÂÆ∂Ê®°Êì¨ËÄÉ v2.0</span>
                    </div>
                    
                    <div className="grid grid-cols-2 gap-3 w-full max-w-sm">
                        <div className="col-span-2">
                            <button onClick={() => startQuiz('normal')} className="w-full py-4 bg-red-600 text-white rounded-xl shadow-lg hover:bg-red-700 active:scale-95 transition flex items-center justify-center font-bold text-lg">
                                <Icons.Clock className="mr-2 w-5 h-5" /> Ê®°Êì¨Ê∏¨È©ó (ÈôêÊôÇ)
                            </button>
                        </div>
                        <button onClick={() => startQuiz('star')} className="py-3 bg-yellow-500 text-white rounded-xl shadow hover:bg-yellow-600 active:scale-95 transition flex flex-col items-center justify-center font-semibold">
                            <div className="flex items-center"><Icons.Star className="mr-1 w-5 h-5" fill="currentColor" /> Êî∂ËóèÁâπË®ì</div>
                            <span className="text-xs opacity-90 mt-1">{bookmarks.length} È°å</span>
                        </button>
                        <button onClick={() => setCurrentScreen('march')} className="py-3 bg-blue-600 text-white rounded-xl shadow hover:bg-blue-700 active:scale-95 transition flex flex-col items-center justify-center font-semibold">
                            <div className="flex items-center"><Icons.Book className="mr-1 w-5 h-5" /> ÈáçÈªûÈÄüÊü•</div>
                            <span className="text-xs opacity-90 mt-1">M.A.R.C.H</span>
                        </button>
                        <button onClick={() => setCurrentScreen('study')} className="col-span-2 py-3 bg-white text-gray-700 border-2 border-gray-200 rounded-xl font-semibold hover:bg-gray-50">
                            ÂÆåÊï¥È°åÂ∫´Èñ±Ë¶Ω
                        </button>
                    </div>
                </div>
            );

            const QuizScreen = () => {
                const currentQ = shuffledQuestions[currentQuestionIndex];
                const isCorrect = selectedAnswer === currentQ.correctAnswer;
                const isBookmarked = bookmarks.includes(currentQ.id);

                return (
                    <div className="flex flex-col h-full bg-gray-50">
                        {/* Top Bar */}
                        <div className="bg-white px-4 py-3 shadow-sm flex justify-between items-center z-10">
                            <button onClick={() => { if(confirm('Á¢∫ÂÆöË¶ÅÈÄÄÂá∫ÂóéÔºüÈÄ≤Â∫¶Â∞á‰∏çÊúÉ‰øùÂ≠ò„ÄÇ')) setCurrentScreen('welcome'); }} className="text-gray-400 hover:text-gray-600">
                                <Icons.ChevronLeft />
                            </button>
                            <div className={`font-mono font-bold text-lg flex items-center ${timeLeft < 60 ? 'text-red-600 animate-pulse' : 'text-gray-700'}`}>
                                <Icons.Clock size={18} className="mr-1" /> {formatTime(timeLeft)}
                            </div>
                            <button onClick={() => toggleBookmark(currentQ.id)} className={`transition ${isBookmarked ? 'text-yellow-500 transform scale-110' : 'text-gray-300'}`}>
                                <Icons.Star fill={isBookmarked ? "currentColor" : "none"} />
                            </button>
                        </div>

                        {/* Progress */}
                        <div className="w-full bg-gray-200 h-1">
                            <div className="bg-red-600 h-1 transition-all duration-300" style={{ width: `${((currentQuestionIndex + 1) / shuffledQuestions.length) * 100}%` }}></div>
                        </div>

                        {/* Content */}
                        <div className="flex-grow overflow-y-auto p-4 pb-24">
                            <div className="bg-white p-5 rounded-2xl shadow-sm mb-4 border border-gray-100">
                                <span className="text-xs font-bold text-red-500 mb-2 block">QUESTION {currentQuestionIndex + 1} / {shuffledQuestions.length}</span>
                                <h3 className="text-xl font-bold text-gray-800 leading-normal">{currentQ.question}</h3>
                            </div>

                            <div className="space-y-3">
                                {currentQ.options.map((option, idx) => {
                                    let btnClass = "w-full text-left p-4 rounded-xl border-2 transition-all duration-150 flex justify-between items-center ";
                                    if (!isAnswerRevealed) {
                                        btnClass += "border-gray-200 bg-white hover:border-red-200 active:bg-gray-50";
                                    } else {
                                        if (idx === currentQ.correctAnswer) btnClass += "border-green-500 bg-green-50 text-green-900";
                                        else if (idx === selectedAnswer) btnClass += "border-red-500 bg-red-50 text-red-900";
                                        else btnClass += "border-gray-100 bg-gray-50 text-gray-400";
                                    }
                                    return (
                                        <button key={idx} onClick={() => handleAnswerClick(idx)} disabled={isAnswerRevealed} className={btnClass}>
                                            <span className="font-medium">{idx + 1}. {option}</span>
                                            {isAnswerRevealed && idx === currentQ.correctAnswer && <Icons.CheckCircle className="text-green-600 w-5 h-5 shrink-0 ml-2" />}
                                            {isAnswerRevealed && idx === selectedAnswer && idx !== currentQ.correctAnswer && <Icons.XCircle className="text-red-600 w-5 h-5 shrink-0 ml-2" />}
                                        </button>
                                    );
                                })}
                            </div>

                            {isAnswerRevealed && (
                                <div className={`mt-4 p-4 rounded-xl animate-fadeIn ${isCorrect ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'}`}>
                                    <p className="font-bold mb-1">{isCorrect ? "Á≠îÂ∞ç‰∫ÜÔºÅ" : "Á≠îÈåØ‰∫ÜÔºÅ"}</p>
                                    {!isCorrect && <p className="text-sm">Ê≠£Á¢∫Á≠îÊ°àÔºö{currentQ.options[currentQ.correctAnswer]}</p>}
                                </div>
                            )}
                        </div>

                        {/* Bottom Button */}
                        <div className="fixed bottom-0 left-0 w-full max-w-md mx-auto p-4 bg-white border-t border-gray-100">
                            <button onClick={nextQuestion} disabled={!isAnswerRevealed} className={`w-full py-3.5 rounded-xl font-bold text-lg shadow-lg transition-all ${!isAnswerRevealed ? 'bg-gray-200 text-gray-400' : 'bg-red-600 text-white hover:bg-red-700'}`}>
                                {currentQuestionIndex < shuffledQuestions.length - 1 ? '‰∏ã‰∏ÄÈ°å' : 'Êü•ÁúãÊàêÁ∏æ'}
                            </button>
                        </div>
                    </div>
                );
            };

            const ResultScreen = () => {
                const percentage = Math.round((score / shuffledQuestions.length) * 100);
                return (
                    <div className="flex flex-col h-full overflow-y-auto bg-white">
                        <div className="bg-gray-900 text-white p-8 text-center rounded-b-3xl shadow-lg relative overflow-hidden">
                            <div className="absolute top-0 left-0 w-full h-full opacity-10 bg-[url('https://www.transparenttextures.com/patterns/carbon-fibre.png')]"></div>
                            <h2 className="text-2xl font-bold mb-2 relative z-10">Ê∏¨È©óÂÆåÊàê</h2>
                            <div className="text-6xl font-black text-red-500 mb-2 relative z-10">{score}<span className="text-2xl text-gray-400">/{shuffledQuestions.length}</span></div>
                            <div className="inline-block px-3 py-1 bg-gray-800 rounded-full text-sm relative z-10">
                                Ê≠£Á¢∫Áéá {percentage}%
                            </div>
                        </div>

                        <div className="p-6 pb-24">
                            <h3 className="font-bold text-gray-800 mb-4 text-lg border-l-4 border-red-500 pl-3">ÈåØË™§Ê™¢Ë®é ({wrongAnswers.length})</h3>
                            {wrongAnswers.length === 0 ? (
                                <div className="text-center py-8 text-gray-400 bg-gray-50 rounded-xl border border-dashed border-gray-300">
                                    <Icons.CheckCircle className="w-12 h-12 mx-auto mb-2 text-green-500" />
                                    <p>Â§™Á•ûÂï¶ÔºÅÂÖ®Â∞çÔºÅ</p>
                                </div>
                            ) : (
                                <div className="space-y-4">
                                    {wrongAnswers.map((q, idx) => (
                                        <div key={idx} className="bg-gray-50 p-4 rounded-xl border border-gray-100">
                                            <div className="flex justify-between items-start mb-2">
                                                <span className="text-xs font-bold bg-red-100 text-red-600 px-2 py-0.5 rounded">Q{q.id}</span>
                                                <button onClick={() => toggleBookmark(q.id)} className={bookmarks.includes(q.id) ? 'text-yellow-500' : 'text-gray-300'}>
                                                    <Icons.Star size={18} fill={bookmarks.includes(q.id) ? "currentColor" : "none"} />
                                                </button>
                                            </div>
                                            <p className="font-medium text-gray-800 mb-3 text-sm">{q.question}</p>
                                            <div className="space-y-1 text-sm">
                                                <div className="flex items-center text-red-600"><Icons.XCircle size={14} className="mr-2"/> {q.options[q.yourAnswer]}</div>
                                                <div className="flex items-center text-green-600 font-bold"><Icons.CheckCircle size={14} className="mr-2"/> {q.options[q.correctAnswer]}</div>
                                            </div>
                                        </div>
                                    ))}
                                </div>
                            )}
                        </div>

                        <div className="fixed bottom-0 w-full max-w-md bg-white p-4 border-t border-gray-100 flex space-x-3">
                            <button onClick={() => setCurrentScreen('welcome')} className="flex-1 py-3 bg-gray-100 text-gray-700 rounded-xl font-bold">ÂõûÈ¶ñÈ†Å</button>
                            <button onClick={() => startQuiz('normal')} className="flex-1 py-3 bg-red-600 text-white rounded-xl font-bold shadow-lg">ÂÜçÊ∏¨‰∏ÄÊ¨°</button>
                        </div>
                    </div>
                );
            };

            const MarchScreen = () => (
                <div className="flex flex-col h-full bg-gray-50">
                    <div className="bg-white p-4 shadow-sm flex items-center sticky top-0 z-10">
                        <button onClick={() => setCurrentScreen('welcome')} className="mr-4 p-1 hover:bg-gray-100 rounded-full"><Icons.ChevronLeft /></button>
                        <h2 className="text-lg font-bold">M.A.R.C.H ÈáçÈªûÈÄüÊü•</h2>
                    </div>
                    <div className="p-4 space-y-4 overflow-y-auto pb-20">
                        <div className="bg-blue-50 p-4 rounded-lg text-sm text-blue-800 mb-4 border border-blue-100">
                            üí° Â∞èÊíáÊ≠•ÔºöËÄÉË©¶‰∏≠ÈÅáÂà∞„ÄåÊµÅÁ®ãÈ†ÜÂ∫è„ÄçÊàñ„Äå‰ª£ËôüÊÑèÁæ©„ÄçÁöÑÈ°åÁõÆÔºåË´ãÂÖàÂõûÊÉ≥ÈÄôÂÄãÂè£Ë®£„ÄÇ
                        </div>
                        {marchData.map((item, idx) => (
                            <div key={idx} className={`rounded-xl overflow-hidden shadow-sm border border-white`}>
                                <div className={`p-4 flex items-center ${item.color}`}>
                                    <div className="text-4xl font-black mr-4 w-12 text-center opacity-80">{item.letter}</div>
                                    <div>
                                        <h3 className="font-bold text-lg">{item.title}</h3>
                                        <p className="font-medium opacity-90">{item.subtitle}</p>
                                    </div>
                                </div>
                                <div className="bg-white p-3 text-gray-600 text-sm">
                                    {item.desc}
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            );

            const StudyMode = () => (
                <div className="flex flex-col h-full bg-gray-50">
                    <div className="bg-white p-4 shadow-sm flex items-center sticky top-0 z-10">
                        <button onClick={() => setCurrentScreen('welcome')} className="mr-4 p-1 hover:bg-gray-100 rounded-full"><Icons.ChevronLeft /></button>
                        <h2 className="text-lg font-bold">ÂÆåÊï¥È°åÂ∫´</h2>
                    </div>
                    <div className="p-4 space-y-4 overflow-y-auto pb-20">
                        {allQuestions.map(q => (
                            <div key={q.id} className="bg-white p-4 rounded-xl shadow-sm border border-gray-100 relative">
                                <button onClick={() => toggleBookmark(q.id)} className={`absolute top-4 right-4 ${bookmarks.includes(q.id) ? 'text-yellow-500' : 'text-gray-200'}`}>
                                    <Icons.Star fill={bookmarks.includes(q.id) ? "currentColor" : "none"} />
                                </button>
                                <span className="text-xs font-bold text-gray-400 mb-1 block">Q{q.id}</span>
                                <h3 className="font-bold text-gray-800 mb-3 pr-8">{q.question}</h3>
                                <div className="space-y-2">
                                    {q.options.map((opt, idx) => (
                                        <div key={idx} className={`text-sm p-2 rounded flex items-center ${idx === q.correctAnswer ? 'bg-green-50 text-green-700 font-bold' : 'text-gray-400'}`}>
                                            {idx === q.correctAnswer && <Icons.CheckCircle className="mr-2 w-4 h-4" />}
                                            {opt}
                                        </div>
                                    ))}
                                </div>
                            </div>
                        ))}
                    </div>
                </div>
            );

            return (
                <>
                    {currentScreen === 'welcome' && <WelcomeScreen />}
                    {currentScreen === 'quiz' && <QuizScreen />}
                    {currentScreen === 'result' && <ResultScreen />}
                    {currentScreen === 'study' && <StudyMode />}
                    {currentScreen === 'march' && <MarchScreen />}
                </>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>

